<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
TEST
</body>
<script>
    // Инициализация SSE
    var accessToken = getCookie("Authorization");
    const username = getCookie("username");

    const eventSource = new EventSource('/api/notifications/subscribe',{headers:{'Authorization':'Bearer '+accessToken,
        'X-username': username}});

    // Обработка событий от сервера

    eventSource.addEventListener('notification', event => {
        const message = JSON.parse(event.data);
        alert('Received notification:', message);
        // Обработка уведомления, например, вывод в консоль или использование Notification API
        console.log('Received notification:', message);

    });

    // Закрытие соединения при разрыве
    eventSource.addEventListener('error', () => {
        eventSource.close();
    });
    function getCookie(name) {
    var value = "; " + document.cookie;
    var parts = value.split("; " + name + "=");
    if (parts.length === 2) {
        return parts.pop().split(";").shift();
        }
    }
</script>
</html>